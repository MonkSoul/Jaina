## 8. 事件总线工厂

`Jaina` 提供了 `IEventBusFactory` 工厂服务，可在运行时动态新增或删除订阅，如：

```cs
public class TestEventBus : IDynamicApiController
{
    private readonly IEventPublisher _eventPublisher;
    private readonly IEventBusFactory _eventBusFactory;
    public TestEventBus(IEventPublisher eventPublisher, IEventBusFactory eventBusFactory)
    {
        _eventPublisher = eventPublisher;
        _eventBusFactory = eventBusFactory;
    }

    // 运行时动态添加一个订阅器
    public async Task AddSubscriber()
    {
        await _eventBusFactory.AddSubscriber("xxx", async (c) =>
        {
            Console.WriteLine("我是动态的");
            await Task.CompletedTask;
        });
    }

    // 运行时动态删除一个订阅器
    public async Task RemoveDynamic(string eventId)
    {
        await _eventBusFactory.RemoveSubscriber(eventId);
    }
}
```